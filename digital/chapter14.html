<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë””ì§€í„¸ ì‹œìŠ¤í…œ: ALU & í”„ë¡œì„¸ì„œ ì„¤ê³„ (ì‹œí—˜ëŒ€ë¹„ ì‹¬í™”íŒ)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="sidebar">
    <div class="brand">âš¡ Logic Master<br><span style="font-size:0.8rem; color:#94a3b8; font-weight:400;">Exam Edition</span></div>
    <div class="menu-label">Chapter 4. Processor</div>
    <div class="nav-item active" onclick="showSection('sec-alu', this)"><span class="nav-icon">ğŸ§®</span> 1. ALU & Register File</div>
    <div class="nav-item" onclick="showSection('sec-buffer', this)"><span class="nav-icon">ğŸš¦</span> 2. Tri-state Buffer</div>
    <div class="nav-item" onclick="showSection('sec-arch', this)"><span class="nav-icon">ğŸ—ï¸</span> 3. í”„ë¡œì„¸ì„œ êµ¬ì¡°</div>
    <div class="nav-item" onclick="showSection('sec-instr', this)"><span class="nav-icon">ğŸ“œ</span> 4. ëª…ë ¹ì–´ & FSM</div>
    <div class="nav-item" onclick="showSection('sec-ext', this)"><span class="nav-icon">ğŸš€</span> 5. í™•ì¥ (ì‹¬í™”)</div>
</div>

<div class="main">
    <div id="sec-alu" class="section-container active">
        <div class="header"><h1>1. ALUì™€ ë ˆì§€ìŠ¤í„° íŒŒì¼</h1><p>ë°ì´í„°íŒ¨ìŠ¤ì˜ í•µì‹¬ ì—°ì‚° ìœ ë‹›ê³¼ ì €ì¥ì†Œ ì„¤ê³„</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('alu-design')">
                <span class="card-icon">â•</span>
                <div class="tag-container"><span class="tag core">í•µì‹¬</span></div>
                <h3>ALU ì„¤ê³„ (Extender)</h3>
                <p>ë‹¨ì¼ ê°€ì‚°ê¸°(Adder) ì•ì— ë¡œì§ì„ ë¶™ì—¬ ëº„ì…ˆ, ë…¼ë¦¬ ì—°ì‚°(AND/OR)ì„ í†µí•©í•˜ëŠ” ì›ë¦¬.</p>
                <div class="btn-learn">Extender êµ¬ì¡° ë³´ê¸° (p.4)</div>
            </div>
            <div class="card" onclick="openModal('rf-structure')">
                <span class="card-icon">ğŸ“š</span>
                <div class="tag-container"><span class="tag exam">ì‹œí—˜ ë¹ˆì¶œ</span></div>
                <h3>ë ˆì§€ìŠ¤í„° íŒŒì¼ (M Ã— N)</h3>
                <p>ì—¬ëŸ¬ ë ˆì§€ìŠ¤í„°ë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì–´ íš¨ìœ¨ì ìœ¼ë¡œ ì½ê³  ì“°ëŠ” êµ¬ì¡° (Write Decoder vs Read Mux).</p>
                <div class="btn-learn">êµ¬ì¡° ìƒì„¸ (p.9)</div>
            </div>
        </div>
    </div>

    <div id="sec-buffer" class="section-container">
        <div class="header"><h1>2. Tri-state Buffer & Bus</h1><p>ë‹¤ì¤‘ ë°ì´í„° ì „ì†¡ ì‹œ ì¶©ëŒì„ ë°©ì§€í•˜ëŠ” í•„ìˆ˜ ì†Œì</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('tristate-logic')">
                <span class="card-icon">ğŸ”Œ</span>
                <div class="tag-container"><span class="tag core">ê°œë…</span></div>
                <h3>Tri-state ë²„í¼ë€?</h3>
                <p>0, 1 ì™¸ì— 'ëŠì–´ì§(High-Z)' ìƒíƒœë¥¼ ê°€ì§€ëŠ” ë²„í¼. ë²„ìŠ¤ ê³µìœ ì˜ í•µì‹¬.</p>
                <div class="btn-learn">ì§„ë¦¬í‘œ ë³´ê¸° (p.11)</div>
            </div>
            <div class="card" onclick="openModal('tristate-app')">
                <span class="card-icon">ğŸšŒ</span>
                <div class="tag-container"><span class="tag">ì‘ìš©</span></div>
                <h3>ê±°ëŒ€ MUX ëŒ€ì²´í•˜ê¸°</h3>
                <p>ìˆ˜ë§ì€ ë ˆì§€ìŠ¤í„° ì¶œë ¥ì„ í•˜ë‚˜ì˜ ë²„ìŠ¤ë¡œ ì—°ê²°í•  ë•Œ MUX ëŒ€ì‹  ë²„í¼ë¥¼ ì“°ëŠ” ì´ìœ .</p>
                <div class="btn-learn">íšŒë¡œ ë¹„êµ (p.10)</div>
            </div>
        </div>
    </div>

    <div id="sec-arch" class="section-container">
        <div class="header"><h1>3. ê¸°ë³¸ í”„ë¡œì„¸ì„œ êµ¬ì¡°</h1><p>ë°ì´í„°íŒ¨ìŠ¤ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê²°í•©</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('proc-basic')">
                <span class="card-icon">ğŸ§ </span>
                <div class="tag-container"><span class="tag exam">êµ¬ì¡°</span></div>
                <h3>í”„ë¡œì„¸ì„œ 3ìš”ì†Œ</h3>
                <p>Datapath(RF+ALU), Control Unit, Memory(Instruction/Data)ì˜ ì—­í• .</p>
                <div class="btn-learn">ì „ì²´ êµ¬ì¡°ë„ (p.18)</div>
            </div>
            <div class="card" onclick="openModal('cycle-steps')">
                <span class="card-icon">ğŸ”„</span>
                <div class="tag-container"><span class="tag core">í•„ìˆ˜</span></div>
                <h3>ëª…ë ¹ì–´ ì‚¬ì´í´ 3ë‹¨ê³„</h3>
                <p>Fetch(ì¸ì¶œ) â†’ Decode(í•´ì„) â†’ Execute(ì‹¤í–‰)ì˜ íë¦„ ì™„ë²½ ì •ë¦¬.</p>
                <div class="btn-learn">ë‹¨ê³„ë³„ ì„¤ëª… (p.23)</div>
            </div>
        </div>
    </div>
    <div id="sec-instr" class="section-container">
        <div class="header"><h1>4. ëª…ë ¹ì–´ ì§‘í•©ê³¼ ì œì–´ FSM</h1><p>í”„ë¡œê·¸ë˜ë¨¸ë¸” í”„ë¡œì„¸ì„œë¥¼ ì›€ì§ì´ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì™€ í•˜ë“œì›¨ì–´ì˜ ì ‘ì </p></div>
        <div class="grid">
            <div class="card" onclick="openModal('instr-set')">
                <span class="card-icon">ğŸ“</span>
                <div class="tag-container"><span class="tag logic">Code</span></div>
                <h3>ëª…ë ¹ì–´ ì§‘í•© (Machine Code)</h3>
                <p>ê¸°ê³„ì–´(0ê³¼ 1)ì™€ ì–´ì…ˆë¸”ë¦¬(MOV, ADD)ì˜ ë§¤í•‘ ë° ë¹„íŠ¸ êµ¬ì¡° í•´ì„.</p>
                <div class="btn-learn">ëª…ë ¹ì–´ ì˜ˆì‹œ (p.16)</div>
            </div>
            <div class="card" onclick="openModal('fsm-ctrl')">
                <span class="card-icon">ğŸ•¹ï¸</span>
                <div class="tag-container"><span class="tag exam">â˜…ì‹¬í™”</span></div>
                <h3>Controller FSM ì„¤ê³„</h3>
                <p>ê° ëª…ë ¹ì–´(Opcode)ì— ë”°ë¼ ë°ì´í„°íŒ¨ìŠ¤ ì œì–´ ì‹ í˜¸ë¥¼ ìƒì„±í•˜ëŠ” ìƒíƒœ ë¨¸ì‹ .</p>
                <div class="btn-learn">ìƒíƒœë„ ë¶„ì„ (p.27~39)</div>
            </div>
        </div>
    </div>

    <div id="sec-ext" class="section-container">
        <div class="header"><h1>5. í”„ë¡œì„¸ì„œ í™•ì¥</h1><p>ê¸°ëŠ¥ ì¶”ê°€ë¥¼ ìœ„í•œ í•˜ë“œì›¨ì–´ ë³€ê²½</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('ext-imm')">
                <span class="card-icon">ğŸ”¢</span>
                <div class="tag-container"><span class="tag">ì‘ìš©</span></div>
                <h3>ìƒìˆ˜ ë¡œë“œ (Load Constant)</h3>
                <p>ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ëª…ë ¹ì–´ ìì²´ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ MUX í™•ì¥.</p>
                <div class="btn-learn">í™•ì¥ ì›ë¦¬ (p.21, 41~43)</div>
            </div>
            <div class="card" onclick="openModal('ext-jmp')">
                <span class="card-icon">ğŸ¦˜</span>
                <div class="tag-container"><span class="tag logic">ë¶„ê¸°</span></div>
                <h3>ì¡°ê±´ë¶€ ì í”„ (JMPZ)</h3>
                <p>Zero flag ê°ì§€ ë¡œì§(NOR gate)ê³¼ PC ê°’ ë³€ê²½ ë©”ì»¤ë‹ˆì¦˜.</p>
                <div class="btn-learn">íšŒë¡œë„ (p.21, 41~43)</div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
            <div class="modal-title" id="modalTitle"></div>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
    </div>
</div>

<script src="common.js"></script>
<script>
    const modalTitles = {
        'alu-design': 'ALUì™€ Extender ì„¤ê³„',
        'rf-structure': 'ë ˆì§€ìŠ¤í„° íŒŒì¼ ë‚´ë¶€ êµ¬ì¡°',
        'tristate-logic': 'Tri-state Buffer ì›ë¦¬',
        'tristate-app': 'Bus ì—°ê²° ë°©ì‹ ë¹„êµ',
        'proc-basic': 'í”„ë¡œì„¸ì„œ ê¸°ë³¸ ì•„í‚¤í…ì²˜',
        'cycle-steps': 'ëª…ë ¹ì–´ ì²˜ë¦¬ 3ë‹¨ê³„',
        'instr-set': 'ëª…ë ¹ì–´ ì§‘í•© êµ¬ì¡°',
        'fsm-ctrl': 'ì»¨íŠ¸ë¡¤ëŸ¬ FSM ìƒì„¸',
        'ext-imm': 'ìƒìˆ˜(Immediate) ë°ì´í„° ì²˜ë¦¬',
        'ext-jmp': 'ì¡°ê±´ë¶€ ë¶„ê¸°(Jump) êµ¬í˜„'
    };

    // --- ë°ì´í„° (14ì¥ ë‚´ìš©) ---
    const contents = {
        // [ALU & Register File]
        'alu-design': `
            <h3>ALU (Arithmetic Logic Unit) ì„¤ê³„ ì² í•™</h3>
            <p>ê°œë³„ ì—°ì‚°ê¸°(Adder, AND, OR)ë¥¼ ë‹¨ìˆœíˆ MUXë¡œ ë¬¶ìœ¼ë©´ ë‚­ë¹„ê°€ ì‹¬í•©ë‹ˆë‹¤. ëŒ€ì‹  <strong>ë‹¨ì¼ Adder</strong> ì•ì— <strong>ALU Extender</strong>ë¥¼ ë°°ì¹˜í•˜ëŠ” íš¨ìœ¨ì ì¸ ì„¤ê³„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
            
            <div class="tech-note">
                <h4>ALU Extenderì˜ ì—­í• </h4>
                <p>ì…ë ¥ A, Bë¥¼ Adderê°€ ì²˜ë¦¬í•˜ê¸° ì¢‹ê²Œ ë¯¸ë¦¬ ë³€í˜•í•©ë‹ˆë‹¤.</p>
                <ul>
                    <li><strong>ë§ì…ˆ (A+B):</strong> A, B ê·¸ëŒ€ë¡œ í†µê³¼, Cin=0</li>
                    <li><strong>ëº„ì…ˆ (A-B):</strong> A í†µê³¼, B ë°˜ì „(1ì˜ ë³´ìˆ˜), Cin=1 (2ì˜ ë³´ìˆ˜ íš¨ê³¼)</li>
                    <li><strong>ë…¼ë¦¬ì—°ì‚° (AND/OR):</strong> ìˆ˜í•™ì ìœ¼ë¡œ ë§ì…ˆê¸°ë¥¼ ì´ìš©í•´ êµ¬í˜„í•˜ê±°ë‚˜, ë³„ë„ ë¡œì§ì„ í†µí•©í•©ë‹ˆë‹¤. (ìì„¸í•œ ê±´ ì§„ë¦¬í‘œ ì°¸ì¡°)</li>
                </ul>
            </div>
            <canvas id="cvs_alu"></canvas>
        `,
        'rf-structure': `
            <h3>ë ˆì§€ìŠ¤í„° íŒŒì¼ (Register File) êµ¬ì¡°</h3>
            <p>ì—¬ëŸ¬ ê°œì˜ ë ˆì§€ìŠ¤í„°(ì˜ˆ: 16ê°œ)ë¥¼ ë§ˆì¹˜ ë©”ëª¨ë¦¬ì²˜ëŸ¼ ì£¼ì†Œë¥¼ ì´ìš©í•´ ì½ê³  ì“°ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.</p>
            
            <h4>ì“°ê¸° (Write) ë™ì‘</h4>
            <ul>
                <li><strong>ì…ë ¥:</strong> Write Data(32bit), Write Addr(4bit), Write Enable</li>
                <li><strong>ì›ë¦¬:</strong> <strong>Decoder</strong>ë¥¼ ì‚¬ìš©í•˜ì—¬ Write Addrì— í•´ë‹¹í•˜ëŠ” ë ˆì§€ìŠ¤í„°ì˜ <code>Load</code> ì‹ í˜¸ë§Œ 1ë¡œ ë§Œë“­ë‹ˆë‹¤.</li>
            </ul>

            <h4>ì½ê¸° (Read) ë™ì‘</h4>
            <ul>
                <li><strong>ì…ë ¥:</strong> Read Addr(4bit)</li>
                <li><strong>ì›ë¦¬:</strong> <strong>MUX</strong>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë ˆì§€ìŠ¤í„° ì¶œë ¥ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤. (í˜¹ì€ Tri-state Buffer ì‚¬ìš©)</li>
            </ul>
            <div class="exam-point">
                <h4>ğŸš© ì‹œí—˜ í¬ì¸íŠ¸: M Ã— N ë ˆì§€ìŠ¤í„° íŒŒì¼</h4>
                <p>Mê°œì˜ ë ˆì§€ìŠ¤í„°ê°€ ìˆê³ , ê° ë ˆì§€ìŠ¤í„°ëŠ” Në¹„íŠ¸ í¬ê¸°ì…ë‹ˆë‹¤. ì“°ê¸° í¬íŠ¸ëŠ” 1ê°œì§€ë§Œ, ì½ê¸° í¬íŠ¸ëŠ” ë³´í†µ 2ê°œ(A, B)ë¥¼ ë‘¬ì„œ ALUì˜ ë‘ ì…ë ¥ìœ¼ë¡œ ë°”ë¡œ ë³´ëƒ…ë‹ˆë‹¤.</p>
            </div>
        `,

        // [Tri-state Buffer]
        'tristate-logic': `
            <h3>Tri-state Buffer (3ìƒ ë²„í¼)</h3>
            <p>ì¶œë ¥ì´ 0, 1 ì™¸ì— <strong>High-Z (ê³ ì„í”¼ë˜ìŠ¤)</strong> ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì†Œìì…ë‹ˆë‹¤.</p>
            
            <div class="math-block">
                Enable = 1 : Output = Input (ì—°ê²°ë¨)<br>
                Enable = 0 : Output = High-Z (ëŠì–´ì§)
            </div>

            <h4>ì™œ í•„ìš”í•œê°€? (Bus Contention)</h4>
            <p>ì—¬ëŸ¬ ë¶€í’ˆì´ í•˜ë‚˜ì˜ ì„ (Bus)ì„ ê³µìœ í•  ë•Œ, ë‘˜ ì´ìƒì˜ ë¶€í’ˆì´ ë™ì‹œì— 0ê³¼ 1ì„ ì¶œë ¥í•˜ë©´ <strong>ë‹¨ë½(Short Circuit)</strong>ì´ ë°œìƒí•©ë‹ˆë‹¤. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¶€í’ˆì€ íšŒë¡œì—ì„œ ì „ê¸°ì ìœ¼ë¡œ ëŠì–´ë²„ë ¤ì•¼(High-Z) ì•ˆì „í•©ë‹ˆë‹¤.</p>
        `,
        'tristate-app': `
            <h3>ê±°ëŒ€ MUX vs Tri-state ë²„í¼</h3>
            <p>ë ˆì§€ìŠ¤í„° íŒŒì¼ì—ì„œ 16ê°œì˜ ë ˆì§€ìŠ¤í„° ì¤‘ í•˜ë‚˜ë¥¼ ì½ì„ ë•Œ:</p>
            <ul>
                <li><strong>MUX ë°©ì‹:</strong> 16x1 MUXê°€ í•„ìš”í•©ë‹ˆë‹¤. ì…ë ¥ì„ ì´ 16 Ã— 32 = 512ê°œë‚˜ ë˜ì–´ ë°°ì„ ì´ ë³µì¡í•˜ê³  í˜¼ì¡(Congestion)í•´ì§‘ë‹ˆë‹¤.</li>
                <li><strong>Tri-state ë°©ì‹:</strong> ëª¨ë“  ë ˆì§€ìŠ¤í„° ì¶œë ¥ì„ í•˜ë‚˜ì˜ ë²„ìŠ¤ ì„ ì— ë¬¶ì–´ë‘ê³ , ì½ê³  ì‹¶ì€ ë ˆì§€ìŠ¤í„°ì˜ ë²„í¼ë§Œ Enable í•©ë‹ˆë‹¤. ë°°ì„ ì´ íšê¸°ì ìœ¼ë¡œ ì¤„ì–´ë“­ë‹ˆë‹¤.</li>
            </ul>
            <canvas id="cvs_tristate"></canvas>
        `,

        // [Processor Architecture]
        'proc-basic': `
            <h3>ê¸°ë³¸ í”„ë¡œì„¸ì„œ ì•„í‚¤í…ì²˜</h3>
            <p>í”„ë¡œì„¸ì„œëŠ” í¬ê²Œ <strong>ì»¨íŠ¸ë¡¤ëŸ¬(ë‡Œ)</strong>ì™€ <strong>ë°ì´í„°íŒ¨ìŠ¤(ëª¸)</strong>ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.</p>

            <table>
                <tr>
                    <th>êµ¬ì„± ìš”ì†Œ</th>
                    <th>ì—­í• </th>
                </tr>
                <tr>
                    <td><strong>PC (Program Counter)</strong></td>
                    <td>ë‹¤ìŒ ì‹¤í–‰í•  ëª…ë ¹ì–´ì˜ ì£¼ì†Œë¥¼ ì €ì¥ (Fetch ë‹¨ê³„ë§ˆë‹¤ +1)</td>
                </tr>
                <tr>
                    <td><strong>IR (Instruction Register)</strong></td>
                    <td>í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ëª…ë ¹ì–´ë¥¼ ì €ì¥</td>
                </tr>
                <tr>
                    <td><strong>Register File (RF)</strong></td>
                    <td>ì—°ì‚°ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì„ì‹œ ì €ì¥í•˜ëŠ” ë¹ ë¥¸ ë©”ëª¨ë¦¬</td>
                </tr>
                <tr>
                    <td><strong>ALU</strong></td>
                    <td>ì‹¤ì œ ë§ì…ˆ, ëº„ì…ˆ ë“±ì„ ìˆ˜í–‰</td>
                </tr>
                <tr>
                    <td><strong>Controller</strong></td>
                    <td>ëª…ë ¹ì–´ë¥¼ í•´ì„(Decode)í•˜ì—¬ ê° ë¶€í’ˆì— ì œì–´ ì‹ í˜¸ë¥¼ ë³´ëƒ„</td>
                </tr>
            </table>
        `,
        'cycle-steps': `
            <div class="exam-point">
                <h4>ğŸš© ì‹œí—˜ 1ìˆœìœ„: Instruction Cycle</h4>
                <p>ëª¨ë“  ëª…ë ¹ì–´ëŠ” ë‹¤ìŒ 3ë‹¨ê³„ë¥¼ ê±°ì³ ìˆ˜í–‰ë©ë‹ˆë‹¤.</p>
            </div>

            <ol>
                <li><strong>Fetch (ì¸ì¶œ):</strong> 
                    <ul>
                        <li>ë©”ëª¨ë¦¬[PC]ì—ì„œ ëª…ë ¹ì–´ë¥¼ ê°€ì ¸ì™€ IRì— ë„£ìŠµë‹ˆë‹¤.</li>
                        <li>PCë¥¼ 1 ì¦ê°€ì‹œì¼œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.</li>
                    </ul>
                </li>
                <li><strong>Decode (í•´ì„):</strong> 
                    <ul>
                        <li>IRì— ë‹´ê¸´ ëª…ë ¹ì–´ê°€ ë§ì…ˆì¸ì§€, ë¡œë“œì¸ì§€ ë¶„ì„í•©ë‹ˆë‹¤.</li>
                        <li>í•„ìš”í•œ ë ˆì§€ìŠ¤í„° ì£¼ì†Œ ë“±ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.</li>
                    </ul>
                </li>
                <li><strong>Execute (ì‹¤í–‰):</strong> 
                    <ul>
                        <li>ì‹¤ì œ ë°ì´í„°íŒ¨ìŠ¤ë¥¼ ë™ì‘ì‹œí‚µë‹ˆë‹¤. (ì˜ˆ: RFì—ì„œ ì½ê¸° -> ALU ì—°ì‚° -> RFì— ì“°ê¸°)</li>
                    </ul>
                </li>
            </ol>
        `,

        // [Instructions & FSM]
        'instr-set': `
            <h3>ëª…ë ¹ì–´ ì§‘í•© (Instruction Set)</h3>
            <p>í”„ë¡œì„¸ì„œê°€ ì´í•´í•˜ëŠ” ì–¸ì–´ì…ë‹ˆë‹¤. ì˜ˆì‹œ(3-Instruction Processor)ë¥¼ ë´…ì‹œë‹¤.</p>

            <table>
                <tr>
                    <th>ì–´ì…ˆë¸”ë¦¬ (Assembly)</th>
                    <th>ê¸°ê³„ì–´ (Machine Code)</th>
                    <th>ì˜ë¯¸</th>
                </tr>
                <tr>
                    <td><code>MOV Ra, d</code></td>
                    <td><code>0000 rrrr dddd...</code></td>
                    <td>RF[Ra] = DataMemory[d] (Load)</td>
                </tr>
                <tr>
                    <td><code>MOV d, Ra</code></td>
                    <td><code>0001 rrrr dddd...</code></td>
                    <td>DataMemory[d] = RF[Ra] (Store)</td>
                </tr>
                <tr>
                    <td><code>ADD Ra, Rb, Rc</code></td>
                    <td><code>0010 aaaa bbbb cccc</code></td>
                    <td>RF[Ra] = RF[Rb] + RF[Rc]</td>
                </tr>
            </table>
            <p>ì•ì˜ 4ë¹„íŠ¸(Opcode)ê°€ ëª…ë ¹ì˜ ì¢…ë¥˜ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.</p>
        `,
        'fsm-ctrl': `
            <h3>Controller FSM (ìœ í•œ ìƒíƒœ ë¨¸ì‹ )</h3>
            <p>ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í˜„ì¬ ìƒíƒœ(Fetch/Decode/Execute)ì™€ ëª…ë ¹ì–´(Opcode)ì— ë”°ë¼ ì œì–´ ì‹ í˜¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.</p>
            
            <canvas id="cvs_fsm"></canvas>

            <ul>
                <li><strong>Fetch ìƒíƒœ:</strong> ë©”ëª¨ë¦¬ Read ì‹ í˜¸ = 1, IR Load ì‹ í˜¸ = 1, PC Inc ì‹ í˜¸ = 1</li>
                <li><strong>Decode ìƒíƒœ:</strong> Opcodeë¥¼ ë³´ê³  ë‹¤ìŒ ìƒíƒœ(Load, Store, Add ë“±)ë¡œ ë¶„ê¸°</li>
                <li><strong>Execute ìƒíƒœ:</strong>
                    <ul>
                        <li><strong>Add:</strong> ALU Selectë¥¼ ë§ì…ˆìœ¼ë¡œ, RF Write Enableì„ 1ë¡œ ì„¤ì •</li>
                        <li><strong>Store:</strong> ë©”ëª¨ë¦¬ Write Enableì„ 1ë¡œ ì„¤ì •</li>
                    </ul>
                </li>
            </ul>
            
            <div class="tech-note">
                <h4>ğŸ“ ì°¸ê³ : ì¶”ê°€ ë‚´ìš© (p.28-44)</h4>
                <p>ì´ ì¥ì˜ ë‚˜ë¨¸ì§€ ë‚´ìš©(3-Instruction Processor í™•ì¥, 6-Instruction Processor, I/O Extension ë“±)ì€ PDFì˜ 28-44í˜ì´ì§€ì— ìƒì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        `,

        // [Extension]
        'ext-imm': `
            <h3>í™•ì¥ 1: ìƒìˆ˜ ë¡œë“œ (Load Constant)</h3>
            <p><code>MOV R0, #5</code> ì²˜ëŸ¼ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ëª…ë ¹ì–´ì— í¬í•¨ëœ ìˆ«ì(Immediate)ë¥¼ ë ˆì§€ìŠ¤í„°ì— ë„£ê³  ì‹¶ì„ ë•Œ.</p>
            <ul>
                <li><strong>ë³€ê²½ì :</strong> ë ˆì§€ìŠ¤í„° íŒŒì¼ ì…ë ¥ ì•ë‹¨ì— <strong>MUX</strong>ë¥¼ í™•ì¥í•©ë‹ˆë‹¤.</li>
                <li>ê¸°ì¡´: [Data Memory] or [ALU Result] (2x1 Mux)</li>
                <li>í™•ì¥: [Data Memory] or [ALU Result] or <strong>[IRì˜ í•˜ìœ„ ë¹„íŠ¸]</strong> (3x1 Mux)</li>
            </ul>
        `,
        'ext-jmp': `
            <h3>í™•ì¥ 2: ì¡°ê±´ë¶€ ì í”„ (JMPZ)</h3>
            <p><code>JMPZ R1, offset</code>: R1ì´ 0ì´ë©´ PCë¥¼ ì í”„ì‹œí‚µë‹ˆë‹¤. (if ë¬¸ êµ¬í˜„)</p>
            <ul>
                <li><strong>Zero Check:</strong> ë ˆì§€ìŠ¤í„° ì¶œë ¥ë‹¨ì— <strong>NOR ê²Œì´íŠ¸</strong>ë¥¼ ë‹¬ì•„ ëª¨ë“  ë¹„íŠ¸ê°€ 0ì¸ì§€ ê²€ì‚¬í•©ë‹ˆë‹¤.</li>
                <li><strong>PC Update:</strong> PC ì…ë ¥ë‹¨ì— ë§ì…ˆê¸°ë¥¼ ë‹¬ì•„, ì¡°ê±´ ë§Œì¡± ì‹œ <code>PC = PC + offset</code>ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
            </ul>
            <div class="math-block">
                Next_PC = (Zero_Flag) ? (PC + Offset) : (PC + 1)
            </div>
        `
    };

    // --- ê·¸ë¦¬ê¸° í•¨ìˆ˜ (14ì¥ ì „ìš©) ---
    function runDrawing(id) {
        if (id === 'alu-design') drawALU();
        else if (id === 'tristate-app') drawTriState();
        else if (id === 'fsm-ctrl') drawFSM();
    }

    function drawALU() {
        const c = document.getElementById('cvs_alu'); if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width = c.clientWidth || 600; const h = c.height = 180;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="14px sans-serif";

        ctx.strokeRect(w/2-60, 40, 120, 40);
        ctx.fillStyle = "#eff6ff"; ctx.fillRect(w/2-59, 41, 118, 38);
        ctx.fillStyle = "#1e293b"; ctx.fillText("ALU Extender", w/2-45, 65);

        ctx.strokeRect(w/2-60, 110, 120, 50); ctx.fillText("Adder (Sum)", w/2-40, 140);

        ctx.strokeStyle = "#4f46e5";
        ctx.beginPath(); ctx.moveTo(w/2-30, 10); ctx.lineTo(w/2-30, 40); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(w/2+30, 10); ctx.lineTo(w/2+30, 40); ctx.stroke();
        ctx.fillText("A", w/2-35, 25); ctx.fillText("B", w/2+35, 25);

        ctx.beginPath(); ctx.moveTo(w/2-30, 80); ctx.lineTo(w/2-30, 110); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(w/2+30, 80); ctx.lineTo(w/2+30, 110); ctx.stroke();

        ctx.fillStyle = "#f43f5e";
        ctx.fillText("Control (Opcode)", w/2-140, 65);
        ctx.beginPath(); ctx.moveTo(w/2-80, 60); ctx.lineTo(w/2-60, 60); ctx.stroke();
    }

    function drawTriState() {
        const c = document.getElementById('cvs_tristate'); if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width = c.clientWidth || 600; const h = c.height = 150;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="14px sans-serif";

        ctx.strokeStyle = "#1e293b"; ctx.lineWidth = 4;
        ctx.beginPath(); ctx.moveTo(50, h/2); ctx.lineTo(w-50, h/2); ctx.stroke();
        ctx.fillText("Common Bus", w-140, h/2-10);

        ctx.lineWidth = 2;
        for(let i=0; i<3; i++) {
            let x = 100 + i*150;
            let y = h/2 - 40;

            ctx.beginPath(); ctx.moveTo(x, 20); ctx.lineTo(x, y); ctx.stroke();
            ctx.fillText("Reg"+i, x-15, 15);

            ctx.beginPath(); ctx.moveTo(x-15, y); ctx.lineTo(x+15, y); ctx.lineTo(x, y+30); ctx.closePath(); ctx.stroke();

            ctx.beginPath(); ctx.moveTo(x, y+30); ctx.lineTo(x, h/2); ctx.stroke();

            ctx.strokeStyle = "#f43f5e";
            ctx.beginPath(); ctx.moveTo(x+10, y+15); ctx.lineTo(x+40, y+15); ctx.stroke();
            ctx.strokeStyle = "#1e293b";
            ctx.fillStyle = "#f43f5e"; ctx.fillText("En"+i, x+45, y+20);
        }
    }

    function drawFSM() {
        const c = document.getElementById('cvs_fsm'); if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width = c.clientWidth || 600; const h = c.height = 180;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="12px sans-serif";

        const states = [
            {x: w/4, y: h/2, txt: "Fetch"},
            {x: w/2, y: h/2, txt: "Decode"},
            {x: 3*w/4, y: 40, txt: "Load"},
            {x: 3*w/4, y: 140, txt: "Add"}
        ];

        states.forEach(s => {
            ctx.beginPath(); ctx.arc(s.x, s.y, 30, 0, Math.PI*2); ctx.stroke();
            ctx.fillStyle = "#fff"; ctx.fill();
            ctx.fillStyle = "#1e293b"; ctx.fillText(s.txt, s.x-15, s.y+5);
        });

        ctx.beginPath(); ctx.moveTo(states[0].x+30, states[0].y); ctx.lineTo(states[1].x-30, states[1].y); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(states[1].x+20, states[1].y-20); ctx.lineTo(states[2].x-25, states[2].y+10); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(states[1].x+20, states[1].y+20); ctx.lineTo(states[3].x-25, states[3].y-10); ctx.stroke();

        ctx.setLineDash([5, 5]); ctx.strokeStyle = "#94a3b8";
        ctx.beginPath(); ctx.moveTo(states[2].x, states[2].y-30); ctx.quadraticCurveTo(w/2, 0, states[0].x, states[0].y-30); ctx.stroke();
        ctx.fillText("Next Cycle", w/2-20, 20);
        ctx.setLineDash([]);
        ctx.strokeStyle = "#1e293b";
    }
</script>
</body>
</html>