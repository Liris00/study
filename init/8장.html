<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 8: Exceptional Control Flow (Final Edition)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap');

        :root {
            --primary: #4f46e5;
            --primary-light: #e0e7ff;
            --primary-dark: #4338ca;
            --secondary: #1e293b;
            --bg-main: #f8fafc;
            --text-main: #334155;
            --accent: #f43f5e;
            --accent-bg: #ffe4e6;
            --success: #10b981;
            --success-bg: #ecfdf5;
            --code-bg: #1e293b;
        }

        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Pretendard', sans-serif; background: var(--bg-main); color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }

        /* ë ˆì´ì•„ì›ƒ */
        .sidebar { width: 280px; background: var(--secondary); color: white; display: flex; flex-direction: column; padding: 25px; flex-shrink: 0; overflow-y: auto; box-shadow: 4px 0 10px rgba(0,0,0,0.1); z-index: 10; }
        .main { flex: 1; padding: 40px 60px; overflow-y: auto; background: #f1f5f9; position: relative; }
        
        /* ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ */
        .brand { font-size: 1.5rem; font-weight: 800; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); color: #fff; letter-spacing: -0.5px; }
        .brand span { font-size: 0.85rem; font-weight: 400; color: #94a3b8; margin-left: 5px; }
        
        .menu-label { font-size: 0.75rem; color: #94a3b8; font-weight: 700; margin: 20px 0 10px 5px; text-transform: uppercase; letter-spacing: 0.5px; }
        .nav-item { padding: 14px 15px; margin-bottom: 8px; border-radius: 10px; cursor: pointer; transition: all 0.2s ease; color: #cbd5e1; display: flex; align-items: center; font-weight: 500; }
        .nav-item:hover { background: rgba(255,255,255,0.1); color: #fff; transform: translateX(3px); }
        .nav-item.active { background: var(--primary); color: white; font-weight: 700; box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3); }
        .nav-icon { margin-right: 12px; font-size: 1.2rem; }

        /* ë©”ì¸ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
        .section-container { display: none; animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); max-width: 1100px; margin: 0 auto; }
        .section-container.active { display: block; }
        
        .header { margin-bottom: 40px; }
        .header h1 { font-size: 2.2rem; margin: 0 0 12px 0; color: #0f172a; font-weight: 800; letter-spacing: -1px; }
        .header p { font-size: 1.1rem; color: #64748b; }
        
        /* ì¹´ë“œ ê·¸ë¦¬ë“œ */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 30px; padding-bottom: 60px; }
        .card { background: #fff; border-radius: 20px; padding: 30px; border: 1px solid #e2e8f0; cursor: pointer; transition: all 0.3s ease; display: flex; flex-direction: column; position: relative; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .card:hover { transform: translateY(-6px); border-color: var(--primary); box-shadow: 0 20px 30px -5px rgba(0,0,0,0.1); }
        .card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: var(--primary); opacity: 0; transition: 0.3s; }
        .card:hover::before { opacity: 1; }
        
        .card-icon { font-size: 2.2rem; margin-bottom: 20px; background: var(--primary-light); width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 16px; color: var(--primary); }
        .card h3 { font-size: 1.4rem; font-weight: 700; color: #1e293b; margin: 0 0 10px 0; }
        .card p { font-size: 1rem; color: #64748b; line-height: 1.6; margin-bottom: 25px; flex-grow: 1; }
        
        .btn-learn { margin-top: auto; background: #f8fafc; color: var(--primary); padding: 14px; border-radius: 12px; text-align: center; font-weight: 600; border: 1px solid #e2e8f0; transition: 0.2s; }
        .card:hover .btn-learn { background: var(--primary); color: white; border-color: var(--primary); }

        /* íƒœê·¸ */
        .tag-container { display: flex; gap: 8px; margin-bottom: 15px; }
        .tag { font-size: 0.75rem; padding: 5px 10px; border-radius: 6px; font-weight: 700; display: inline-block; letter-spacing: 0.5px; }
        .tag.core { background: #fee2e2; color: #ef4444; }
        .tag.exam { background: #dbeafe; color: #2563eb; }
        .tag.logic { background: #fef3c7; color: #d97706; }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(5px); z-index: 1000; display: none; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.open { display: flex; opacity: 1; }
        
        .modal-content { background: #fff; width: 90%; max-width: 950px; height: 90vh; border-radius: 24px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        .modal-overlay.open .modal-content { transform: scale(1); }
        
        .modal-header { padding: 25px 35px; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; background: #fff; z-index: 10; }
        .modal-title { font-size: 1.6rem; font-weight: 800; color: #0f172a; }
        .close-btn { font-size: 2rem; cursor: pointer; background: none; border: none; color: #94a3b8; transition: 0.2s; line-height: 1; }
        .close-btn:hover { color: var(--accent); transform: rotate(90deg); }
        
        .modal-body { padding: 40px; overflow-y: auto; line-height: 1.8; color: #334155; font-size: 1.05rem; }
        
        /* --- ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜ ìŠ¤íƒ€ì¼ --- */
        
        /* 1. Exam Point (ëˆ„ë½ë˜ì—ˆë˜ ìŠ¤íƒ€ì¼ ì¶”ê°€) */
        .exam-point { background: #fff1f2; border: 1px solid #fecdd3; border-radius: 12px; padding: 20px; margin: 25px 0; }
        .exam-point h4 { margin: 0 0 10px 0; color: #be123c; font-size: 1.1rem; display: flex; align-items: center; gap: 8px; font-weight: 700; }
        .exam-point h4::before { content: 'ğŸš©'; }

        /* 2. Easy Explain (ìŠ¤íƒ€ì¼ ë³´ê°•) */
        .easy-explain { background-color: var(--success-bg); border-left: 6px solid var(--success); padding: 25px; margin: 25px 0; border-radius: 0 12px 12px 0; box-shadow: 0 4px 6px -2px rgba(0,0,0,0.05); }
        .easy-explain h4 { color: #059669; margin: 0 0 12px 0; font-size: 1.15rem; display: flex; align-items: center; gap: 8px; }
        .easy-explain h4::before { content: 'ğŸ’¡'; font-size: 1.2rem; }
        .easy-explain ul { margin: 0; padding-left: 20px; }
        .easy-explain li { margin-bottom: 6px; }

        /* 3. íƒ­ ì¸í„°í˜ì´ìŠ¤ (ìƒì„¸ ì½”ë“œ ë¶„ì„ìš©) */
        .tab-container { margin-top: 30px; border: 1px solid #e2e8f0; border-radius: 16px; overflow: hidden; }
        .tab-header { display: flex; background: #f1f5f9; border-bottom: 1px solid #e2e8f0; }
        .tab-btn { flex: 1; padding: 15px; background: none; border: none; font-weight: 600; color: #64748b; cursor: pointer; transition: 0.2s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { background: rgba(255,255,255,0.5); color: var(--primary); }
        .tab-btn.active { background: #fff; color: var(--primary); border-bottom-color: var(--primary); }
        .tab-pane { display: none; padding: 25px; background: #fff; }
        .tab-pane.active { display: block; animation: fadeIn 0.3s; }
        
        /* 4. ì½”ë“œ ë¸”ë¡ (Dark Theme & ì£¼ì„) */
        pre { background: var(--code-bg); color: #f8fafc; padding: 20px; border-radius: 12px; overflow-x: auto; font-family: 'Consolas', monospace; line-height: 1.6; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3); }
        code { font-family: inherit; }
        
        /* ì¸ë¼ì¸ ì½”ë“œ ìŠ¤íƒ€ì¼ (ë³¸ë¬¸ìš©) */
        p code, li code { background: #f1f5f9; padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 0.9em; color: var(--primary); border: 1px solid #e2e8f0; }

        /* ì½”ë“œ í•˜ì´ë¼ì´íŒ… í´ë˜ìŠ¤ */
        .code-comment { color: #94a3b8; font-style: italic; }
        .code-highlight { color: #fb7185; font-weight: bold; background: rgba(251, 113, 133, 0.1); padding: 2px 4px; border-radius: 4px; }
        .code-keyword { color: #818cf8; font-weight: bold; }
        .code-function { color: #fcd34d; }
        .code-type { color: #34d399; }

        /* 5. ì‹œë®¬ë ˆì´ì…˜ UI */
        .sim-box { border: 2px solid #e2e8f0; padding: 30px; border-radius: 16px; text-align: center; margin: 25px 0; background: #fff; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .process-container { display: flex; justify-content: space-around; margin: 30px 0; align-items: flex-start; min-height: 120px; }
        .process-node { width: 140px; padding: 20px; border: 2px solid #cbd5e1; border-radius: 16px; font-weight: 700; background: #f8fafc; transition: 0.4s; position: relative; display: flex; flex-direction: column; gap: 5px; }
        
        .process-node.parent { border-color: var(--primary); background: var(--primary-light); color: var(--primary); }
        .process-node.child { border-color: var(--success); background: var(--success-bg); color: var(--success); animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .process-node .label { font-size: 0.8rem; font-weight: 400; color: #64748b; }
        .process-node .pid-badge { font-size: 0.75rem; background: rgba(0,0,0,0.1); padding: 2px 6px; border-radius: 4px; align-self: center; }
        
        .sim-log { margin-bottom: 20px; font-size: 1.1rem; color: #334155; font-weight: 500; min-height: 30px; }
        .sim-controls button { background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 50px; cursor: pointer; font-weight: 700; font-size: 1rem; transition: 0.2s; box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3); }
        .sim-controls button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(79, 70, 229, 0.4); }
        .sim-controls button:active { transform: translateY(0); }

        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 70% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ê³µí†µ íƒ€ì´í¬ê·¸ë˜í”¼ */
        h3 { font-size: 1.3rem; color: var(--primary); margin: 30px 0 15px 0; font-weight: 700; border-left: 5px solid var(--primary); padding-left: 15px; }
        h4 { font-size: 1.1rem; color: #1e293b; margin: 20px 0 10px 0; font-weight: 700; }
        
        table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #fff; border-radius: 8px; overflow: hidden; border: 1px solid #e2e8f0; }
        th { background: #f1f5f9; color: #334155; font-weight: 700; padding: 12px; border-bottom: 2px solid #e2e8f0; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: center; color: #475569; }
        tr:last-child td { border-bottom: none; }
        tr:hover { background: #f8fafc; }
        
        ul, ol { padding-left: 20px; margin-bottom: 20px; }
        li { margin-bottom: 8px; }
        
        canvas { width: 100%; height: 240px; background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; display: block; margin: 20px 0; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="brand">âš¡ Logic Master<br><span style="font-weight:400; font-size:0.9rem; opacity:0.8;">Chapter 8 Update</span></div>
    <div class="menu-label">Chapter 8. ECF & Process</div>
    <div class="nav-item active" onclick="showSection('sec-exception', this)"><span class="nav-icon">âš ï¸</span> 1. ì˜ˆì™¸ (Exception)</div>
    <div class="nav-item" onclick="showSection('sec-process', this)"><span class="nav-icon">ğŸ”„</span> 2. í”„ë¡œì„¸ìŠ¤ ê°œìš”</div>
    <div class="nav-item" onclick="showSection('sec-control', this)"><span class="nav-icon">ğŸ®</span> 3. í”„ë¡œì„¸ìŠ¤ ì œì–´</div>
    <div class="nav-item" onclick="showSection('sec-zombie', this)"><span class="nav-icon">ğŸ§Ÿ</span> 4. ì¢€ë¹„ì™€ ì‹œê·¸ë„</div>
</div>

<div class="main">
    <div id="sec-exception" class="section-container active">
        <div class="header"><h1>1. ì˜ˆì™¸ ì²˜ë¦¬ (Exceptions)</h1><p>ì‹œìŠ¤í…œ ìƒíƒœ ë³€í™”ì— ëŒ€ì‘í•˜ëŠ” ì œì–´ íë¦„ì˜ ë³€í™”</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('exception-basic')">
                <span class="card-icon">âš¡</span>
                <div class="tag-container"><span class="tag core">ê°œë…</span></div>
                <h3>ì˜ˆì™¸ë€ ë¬´ì—‡ì¸ê°€?</h3>
                <p>í•˜ë“œì›¨ì–´ì™€ OSê°€ í˜‘ë ¥í•˜ì—¬ ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜.</p>
                <div class="btn-learn">ì‰¬ìš´ ì„¤ëª… ë³´ê¸°</div>
            </div>
            <div class="card" onclick="openModal('exception-class')">
                <span class="card-icon">ğŸ“‹</span>
                <div class="tag-container"><span class="tag exam">ì‹œí—˜ ë¹ˆì¶œ</span></div>
                <h3>ì˜ˆì™¸ì˜ 4ê°€ì§€ ìœ í˜•</h3>
                <p>Interrupts, Traps, Faults, Abortsì˜ ì°¨ì´ì  ì™„ë²½ ì •ë¦¬.</p>
                <div class="btn-learn">ë¹„êµí‘œ ë³´ê¸° (p.10)</div>
            </div>
        </div>
    </div>

    <div id="sec-process" class="section-container">
        <div class="header"><h1>2. í”„ë¡œì„¸ìŠ¤ (Process)</h1><p>ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì˜ ì¶”ìƒí™”</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('process-concept')">
                <span class="card-icon">ğŸ§ </span>
                <div class="tag-container"><span class="tag core">ì •ì˜</span></div>
                <h3>í”„ë¡œì„¸ìŠ¤ì˜ í™˜ìƒ (Illusion)</h3>
                <p>ë§ˆì¹˜ í˜¼ìì„œ CPUì™€ ë©”ëª¨ë¦¬ë¥¼ ë…ì í•˜ëŠ” ë“¯í•œ ì°©ê°ì„ ì¼ìœ¼í‚¤ëŠ” ê¸°ìˆ .</p>
                <div class="btn-learn">ìƒì„¸ ì„¤ëª… (p.17)</div>
            </div>
            <div class="card" onclick="openModal('context-switch')">
                <span class="card-icon">ğŸ”€</span>
                <div class="tag-container"><span class="tag exam">ì¤‘ìš”</span></div>
                <h3>ë¬¸ë§¥ êµí™˜ (Context Switch)</h3>
                <p>CPUê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°ˆì•„ë¼ìš°ëŠ” ê³¼ì •. ì»¤ë„ ëª¨ë“œì™€ ìœ ì € ëª¨ë“œ.</p>
                <div class="btn-learn">ë™ì‘ ì›ë¦¬ ë³´ê¸°</div>
            </div>
        </div>
    </div>

    <div id="sec-control" class="section-container">
        <div class="header"><h1>3. í”„ë¡œì„¸ìŠ¤ ì œì–´ (Control)</h1><p>fork, exit, wait, execve ì‹œìŠ¤í…œ ì½œ</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('fork-sim')">
                <span class="card-icon">ğŸ´</span>
                <div class="tag-container"><span class="tag core">Interactive</span></div>
                <h3>Fork() ì‹œë®¬ë ˆì´ì…˜</h3>
                <p>í•œ ë²ˆ í˜¸ì¶œë˜ì–´ ë‘ ë²ˆ ë¦¬í„´ë˜ëŠ” <code>fork()</code>ì˜ ë§ˆë²•ì„ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”.</p>
                <div class="btn-learn">ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘ â–¶</div>
            </div>
            <div class="card" onclick="openModal('execve-code')">
                <span class="card-icon">ğŸš€</span>
                <div class="tag-container"><span class="tag logic">ìƒì„¸ ë¶„ì„</span></div>
                <h3>Execve & Wait</h3>
                <p>í”„ë¡œê·¸ë¨ ì‹¤í–‰(<code>execve</code>)ê³¼ ìì‹ ê¸°ë‹¤ë¦¬ê¸°(<code>wait</code>) ì½”ë“œ ì •ë³µ.</p>
                <div class="btn-learn">ì½”ë“œ ë¶„ì„ ë³´ê¸°</div>
            </div>
        </div>
    </div>

    <div id="sec-zombie" class="section-container">
        <div class="header"><h1>4. ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ & ìƒíƒœ</h1><p>ì£½ì—ˆì§€ë§Œ ì‚¬ë¼ì§€ì§€ ì•Šì€ í”„ë¡œì„¸ìŠ¤ ì²˜ë¦¬í•˜ê¸°</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('process-state')">
                <span class="card-icon">ğŸ”„</span>
                <div class="tag-container"><span class="tag exam">ìƒíƒœë„</span></div>
                <h3>í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì „ì´ë„</h3>
                <p>Running, Stopped, Zombie ìƒíƒœì˜ ë³€í™” ê³¼ì • ì‹œê°í™”.</p>
                <div class="btn-learn">Canvas ê·¸ë¦¼ ë³´ê¸°</div>
            </div>
            <div class="card" onclick="openModal('zombie-reaping')">
                <span class="card-icon">ğŸ§Ÿ</span>
                <div class="tag-container"><span class="tag core">ê°œë…</span></div>
                <h3>ì¢€ë¹„ì™€ ìˆ˜ê±° (Reaping)</h3>
                <p>ë¶€ëª¨ê°€ <code>wait()</code> í•´ì£¼ì§€ ì•Šìœ¼ë©´ ë°œìƒí•˜ëŠ” ë¬¸ì œì™€ í•´ê²°ë²•.</p>
                <div class="btn-learn">ì›ë¦¬ ì„¤ëª… (p.44)</div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay" onclick="window.closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
            <div class="modal-title" id="modalTitle">ì œëª©</div>
            <button class="close-btn" onclick="window.closeModal()">âœ•</button>
        </div>
        <div class="modal-body" id="modalBody">ë‚´ìš©</div>
    </div>
</div>

<script>
    // --- 1. ì „ì—­ ì´ˆê¸°í™” ---
    window.simStep = 0;

    function initializePage() {
        document.querySelectorAll('.section-container').forEach(el => el.classList.remove('active'));
        var firstSection = document.getElementById('sec-exception');
        if(firstSection) firstSection.classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        var firstNav = document.querySelector('.nav-item');
        if(firstNav) firstNav.classList.add('active');
    }

    window.showSection = function(id, el) {
        var sections = document.querySelectorAll('.section-container');
        for(var i=0; i<sections.length; i++) sections[i].classList.remove('active');
        document.getElementById(id).classList.add('active');

        var navs = document.querySelectorAll('.nav-item');
        for(var i=0; i<navs.length; i++) navs[i].classList.remove('active');
        el.classList.add('active');
    }

    // --- 2. ì½˜í…ì¸  ë°ì´í„° (íƒ­ ê¸°ëŠ¥ ì ìš©) ---
    const contents = {
        'exception-basic': `
            <h3>ì˜ˆì™¸(Exception)ë€?</h3>
            <div class="easy-explain">
                <h4>ğŸ‘¨â€ğŸ« ì„ ìƒë‹˜ê³¼ í•™ìƒ ë¹„ìœ </h4>
                <ul>
                    <li><strong>Control Flow:</strong> í•™ìƒ(CPU)ì´ êµê³¼ì„œ(ì½”ë“œ)ë¥¼ ìˆœì„œëŒ€ë¡œ ì½ëŠ” ê²ƒ.</li>
                    <li><strong>Exception:</strong> ê°‘ìê¸° ë¶ˆì´ ë‚˜ê±°ë‚˜(Interrupt), í•™ìƒì´ ëª¨ë¥´ëŠ” ê±¸ ì§ˆë¬¸í•˜ê±°ë‚˜(Trap), ë°°ê°€ ì•„í”„ë‹¤ê³  í•˜ëŠ”(Fault) ìƒí™©ì…ë‹ˆë‹¤.</li>
                    <li><strong>Handler:</strong> ì„ ìƒë‹˜(OS Kernel)ì´ ì ì‹œ ìˆ˜ì—…ì„ ë©ˆì¶”ê³  ìƒí™©ì„ ì²˜ë¦¬í•´ì£¼ëŠ” ì ˆì°¨ì…ë‹ˆë‹¤.</li>
                </ul>
            </div>
            <p>í•˜ë“œì›¨ì–´ì™€ OSê°€ í˜‘ë ¥í•˜ì—¬ í”„ë¡œì„¸ì„œì˜ ìƒíƒœ ë³€í™”(Event)ì— ëŒ€ì‘í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. ê° ì˜ˆì™¸ëŠ” ê³ ìœ  ë²ˆí˜¸ë¥¼ ê°€ì§€ë©°, <strong>Exception Table</strong>ì„ í†µí•´ ì²˜ë¦¬ê¸°(Handler)ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
        `,
        'exception-class': `
            <h3>ì˜ˆì™¸ì˜ 4ê°€ì§€ ìœ í˜• (Classes)</h3>
            <div class="exam-point">
                <h4>ğŸš© ì‹œí—˜ í•µì‹¬: ë™ê¸° vs ë¹„ë™ê¸°</h4>
                <p>InterruptëŠ” ì™¸ë¶€ ì‹ í˜¸ë¼ <strong>ë¹„ë™ê¸°(Asynchronous)</strong>ì´ê³ , ë‚˜ë¨¸ì§€ëŠ” ëª…ë ¹ì–´ ì‹¤í–‰ ì¤‘ ë°œìƒí•˜ë¯€ë¡œ <strong>ë™ê¸°(Synchronous)</strong>ì…ë‹ˆë‹¤.</p>
            </div>
            <table>
                <tr><th>ìœ í˜•</th><th>ì›ì¸</th><th>ë™ê¸°/ë¹„ë™ê¸°</th><th>ì²˜ë¦¬ í›„ ë™ì‘</th></tr>
                <tr><td><strong>Interrupt</strong></td><td>ì™¸ë¶€ I/O (íƒ€ì´ë¨¸, í‚¤ë³´ë“œ)</td><td>ë¹„ë™ê¸° (Async)</td><td>Next ëª…ë ¹ì–´ë¡œ ë³µê·€</td></tr>
                <tr><td><strong>Trap</strong></td><td>ì˜ë„ì  í˜¸ì¶œ (System Call)</td><td>ë™ê¸° (Sync)</td><td>Next ëª…ë ¹ì–´ë¡œ ë³µê·€</td></tr>
                <tr><td><strong>Fault</strong></td><td>ì˜¤ë¥˜ (Page Fault)</td><td>ë™ê¸° (Sync)</td><td>í˜„ì¬ ëª…ë ¹ì–´ ì¬ì‹œë„</td></tr>
                <tr><td><strong>Abort</strong></td><td>ì‹¬ê°í•œ ì˜¤ë¥˜ (HW ê³ ì¥)</td><td>ë™ê¸° (Sync)</td><td>í”„ë¡œê·¸ë¨ ì¢…ë£Œ (Abort)</td></tr>
            </table>
        `,
        'process-concept': `
            <h3>í”„ë¡œì„¸ìŠ¤ (Process)</h3>
            <p>ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì˜ ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œì€ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë‘ ê°€ì§€ <strong>í™˜ìƒ(Illusion)</strong>ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            <ul>
                <li><strong>Logical Control Flow:</strong> ë§ˆì¹˜ CPUë¥¼ í˜¼ì ë…ì í•´ì„œ ì“°ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. (ì‹¤ì œë¡œëŠ” Context Switchingìœ¼ë¡œ ë‚˜ëˆ  ì”€)</li>
                <li><strong>Private Address Space:</strong> ë§ˆì¹˜ ë©”ëª¨ë¦¬ë¥¼ í˜¼ì ë…ì í•´ì„œ ì“°ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤. (ì‹¤ì œë¡œëŠ” Virtual Memoryë¡œ ê´€ë¦¬ë¨)</li>
            </ul>
        `,
        'context-switch': `
            <h3>ë¬¸ë§¥ êµí™˜ (Context Switch)</h3>
            <p>OS ì»¤ë„ì´ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ë‹¨í•˜ê³ , ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.</p>
            <div class="easy-explain">
                <h4>ğŸ”„ ì‘ì—… ì „í™˜ ë¹„ìœ </h4>
                <p>ê³µë¶€(A)ë¥¼ í•˜ë‹¤ê°€ ë°¥(B)ì„ ë¨¹ìœ¼ëŸ¬ ê°ˆ ë•Œ, ì–´ë””ê¹Œì§€ ê³µë¶€í–ˆëŠ”ì§€ <strong>ì±…ê°ˆí”¼(Register Context)</strong>ë¥¼ ê½‚ì•„ë‘ê³  ê°‘ë‹ˆë‹¤. ë°¥ì„ ë‹¤ ë¨¹ìœ¼ë©´ ì±…ê°ˆí”¼ ê½‚ì€ ê³³ë¶€í„° ë‹¤ì‹œ ê³µë¶€ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.</p>
            </div>
            <ul>
                <li>í˜„ì¬ í”„ë¡œì„¸ìŠ¤ì˜ ë ˆì§€ìŠ¤í„° ê°’ì„ ë©”ëª¨ë¦¬(ì»¤ë„ ìŠ¤íƒ)ì— ì €ì¥.</li>
                <li>ë‹¤ìŒ í”„ë¡œì„¸ìŠ¤ì˜ ì €ì¥ëœ ë ˆì§€ìŠ¤í„° ê°’ì„ ë³µì›.</li>
                <li>ì´ ê³¼ì •ì€ í•˜ë“œì›¨ì–´ íƒ€ì´ë¨¸ ì¸í„°ëŸ½íŠ¸ì— ì˜í•´ ì£¼ê¸°ì ìœ¼ë¡œ ë°œìƒí•©ë‹ˆë‹¤.</li>
            </ul>
        `,
        'fork-sim': `
            <h3>Fork() í•¨ìˆ˜ ë¶„ì„</h3>
            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="window.switchTab('sim', this)">ì‹œë®¬ë ˆì´ì…˜</button>
                    <button class="tab-btn" onclick="window.switchTab('code', this)">ìƒì„¸ ì½”ë“œ ë¶„ì„</button>
                </div>
                
                <div id="tab-sim" class="tab-pane active">
                    <p><code>pid = fork()</code> í˜¸ì¶œ ì‹œ ì¼ì–´ë‚˜ëŠ” ì¼ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                    <div class="sim-box">
                        <div class="process-container" id="proc-container">
                            <div class="process-node parent">
                                Parent (PID: 100)
                                <div class="label">Running</div>
                            </div>
                        </div>
                        <div class="sim-log" id="sim-log">ğŸ‘‡ ë²„íŠ¼ì„ ëˆŒëŸ¬ fork()ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.</div>
                        <div class="sim-controls">
                            <button onclick="window.nextForkStep()">Fork ì‹¤í–‰ â–¶</button>
                        </div>
                    </div>
                </div>

                <div id="tab-code" class="tab-pane">
                    <pre><code><span class="code-type">int</span> <span class="code-function">main</span>() {
    <span class="code-type">pid_t</span> pid;
    <span class="code-keyword">int</span> x = 1;

    <span class="code-comment">// fork()ëŠ” í•œ ë²ˆ í˜¸ì¶œë˜ì§€ë§Œ ë‘ ë²ˆ ë¦¬í„´í•©ë‹ˆë‹¤!</span>
    pid = <span class="code-function">fork</span>(); 

    <span class="code-keyword">if</span> (pid == 0) {  
        <span class="code-comment">// [ìì‹ í”„ë¡œì„¸ìŠ¤ ì˜ì—­]</span>
        <span class="code-comment">// ìì‹ì—ê²ŒëŠ” pid 0ì´ ë°˜í™˜ë©ë‹ˆë‹¤.</span>
        <span class="code-function">printf</span>("child: x=%d\\n", ++x); 
        <span class="code-function">exit</span>(0);
    } 

    <span class="code-comment">// [ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ì˜ì—­]</span>
    <span class="code-comment">// ë¶€ëª¨ì—ê²ŒëŠ” ìì‹ì˜ PID(ì˜ˆ: 101)ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.</span>
    <span class="code-function">printf</span>("parent: x=%d\\n", --x);
    <span class="code-function">exit</span>(0);
}</code></pre>
                    <div class="exam-point">
                        <h4>ğŸš© í•µì‹¬ í¬ì¸íŠ¸</h4>
                        <p>1. <strong>ë³µì œ:</strong> ìì‹ì€ ë¶€ëª¨ì˜ ë©”ëª¨ë¦¬(ë³€ìˆ˜ x=1 í¬í•¨)ë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì§€ë§Œ, <strong>ë³„ë„ì˜ ê³µê°„</strong>ì„ ê°€ì§‘ë‹ˆë‹¤.</p>
                        <p>2. <strong>ë™ì‹œì„±:</strong> ë¶€ëª¨ì™€ ìì‹ ì¤‘ ëˆ„ê°€ ë¨¼ì € ì‹¤í–‰ë ì§€ëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Concurrent).</p>
                    </div>
                </div>
            </div>
        `,
        'execve-code': `
            <h3>Execve & Wait í•¨ìˆ˜ ë¶„ì„</h3>
            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="window.switchTab('summary', this)">ìš”ì•½</button>
                    <button class="tab-btn" onclick="window.switchTab('code-wait', this)">Wait ë¶„ì„</button>
                    <button class="tab-btn" onclick="window.switchTab('code-exec', this)">Execve ë¶„ì„</button>
                </div>

                <div id="tab-summary" class="tab-pane active">
                    <p><strong>execve()</strong>: í˜„ì¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë®ì–´ì”ë‹ˆë‹¤. (ëŒì•„ì˜¤ì§€ ì•ŠìŒ)</p>
                    <p><strong>wait()</strong>: ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ ë¶€ëª¨ë¥¼ ì ì¬ì›ë‹ˆë‹¤(Block).</p>
                </div>

                <div id="tab-code-wait" class="tab-pane">
                    <pre><code><span class="code-type">int</span> child_status;

<span class="code-keyword">if</span> (<span class="code-function">fork</span>() == 0) {
    <span class="code-function">printf</span>("Hello from child\\n");
    <span class="code-function">exit</span>(0); <span class="code-comment">// ìì‹ ì¢…ë£Œ</span>
} <span class="code-keyword">else</span> {
    <span class="code-function">printf</span>("Hello from parent\\n");
    
    <span class="code-comment">// ìì‹ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸° (Blocking)</span>
    <span class="code-function">wait</span>(&child_status);
    
    <span class="code-function">printf</span>("Child has terminated\\n");
}</code></pre>
                    <p class="exam-point"><strong>ë™ê¸°í™”:</strong> <code>wait()</code> ë•ë¶„ì— ë¶€ëª¨ëŠ” ìì‹ì´ "Hello"ë¥¼ ì¶œë ¥í•˜ê³  ì£½ì€ ë’¤ì—ì•¼ "Terminated"ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.</p>
                </div>

                <div id="tab-code-exec" class="tab-pane">
                    <pre><code><span class="code-comment">// ls -lt /usr/include ëª…ë ¹ ì‹¤í–‰ ì˜ˆì‹œ</span>
<span class="code-keyword">if</span> (<span class="code-function">fork</span>() == 0) {
    <span class="code-comment">// execveëŠ” ì„±ê³µí•˜ë©´ ë¦¬í„´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!</span>
    <span class="code-comment">// í˜„ì¬ ì½”ë“œ/ë°ì´í„°/ìŠ¤íƒì„ /bin/lsë¡œ ë®ì–´ì”ë‹ˆë‹¤.</span>
    <span class="code-keyword">if</span> (<span class="code-function">execve</span>(myargv[0], myargv, environ) < 0) {
        <span class="code-function">printf</span>("Command not found.\\n");
        <span class="code-function">exit</span>(1);
    }
}</code></pre>
                </div>
            </div>
        `,
        'process-graph': `
            <h3>í”„ë¡œì„¸ìŠ¤ ê·¸ë˜í”„ (Process Graph)</h3>
            <p><code>fork()</code>ê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ë•Œ ì‹¤í–‰ ìˆœì„œë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤.</p>
            <ul>
                <li>ê° ì •ì (Vertex)ì€ ì‹¤í–‰ ë¬¸ì¥ì…ë‹ˆë‹¤.</li>
                <li>í™”ì‚´í‘œ(Edge)ëŠ” ì‹¤í–‰ ìˆœì„œ(a -> b)ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
                <li>ìœ„ìƒ ì •ë ¬(Topological Sort)ì„ í†µí•´ ê°€ëŠ¥í•œ ì¶œë ¥ ìˆœì„œë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>
            <div class="exam-point">
                <h4>ğŸš© ì‹œí—˜ íŒ</h4>
                <p>ë¶€ëª¨ì™€ ìì‹ì€ <strong>ë™ì‹œì—(Concurrent)</strong> ì‹¤í–‰ë˜ë¯€ë¡œ, ë¬¼ë¦¬ì ì¸ ì‹¤í–‰ ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë…¼ë¦¬ì ì¸ ìˆœì„œë§Œ ê·¸ë˜í”„ë¡œ íŒŒì•…í•˜ì„¸ìš”.</p>
            </div>
        `,
        'process-state': `
            <h3>í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì „ì´ë„</h3>
            <p>í”„ë¡œì„¸ìŠ¤ëŠ” ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ ì—¬ëŸ¬ ìƒíƒœë¥¼ ê±°ì¹©ë‹ˆë‹¤.</p>
            <canvas id="cvs_state"></canvas>
            <ul>
                <li><strong>Running:</strong> CPUë¥¼ ì¡ê³  ì‹¤í–‰ ì¤‘ì´ê±°ë‚˜, ì‹¤í–‰ ëŒ€ê¸° ì¤‘ì¸ ìƒíƒœ.</li>
                <li><strong>Stopped:</strong> ì‹œê·¸ë„(Ctrl-Z) ë“±ì— ì˜í•´ ì¼ì‹œ ì¤‘ë‹¨ëœ ìƒíƒœ.</li>
                <li><strong>Zombie:</strong> ì¢…ë£Œë˜ì—ˆìœ¼ë‚˜ ë¶€ëª¨ê°€ ì•„ì§ ìˆ˜ê±°(Reap)í•˜ì§€ ì•Šì€ ìƒíƒœ.</li>
            </ul>
        `,
        'zombie-reaping': `
            <h3>ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ì™€ Reaping</h3>
            <div class="easy-explain">
                <h4>ğŸ§Ÿ ì¢€ë¹„ ë¹„ìœ </h4>
                <p>í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œ(<code>exit</code>)ë˜ì–´ë„, ë¶€ëª¨ê°€ ì‚¬ë§ ì‹ ê³ (<code>wait</code>)ë¥¼ í•´ì£¼ê¸° ì „ê¹Œì§€ëŠ” ì‹œìŠ¤í…œì— <strong>ê»ë°ê¸°(ìµœì†Œí•œì˜ ì •ë³´)</strong>ê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ ì¢€ë¹„ì…ë‹ˆë‹¤.</p>
            </div>
            <ul>
                <li><strong>Reaping:</strong> ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ <code>wait()</code>ë‚˜ <code>waitpid()</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ ìì‹ì˜ ì¢…ë£Œ ìƒíƒœë¥¼ ì½ê³  ì¢€ë¹„ë¥¼ ì œê±°í•˜ëŠ” ê³¼ì •.</li>
                <li>ë¶€ëª¨ê°€ Reaping ì—†ì´ ë¨¼ì € ì£½ìœ¼ë©´? <strong>Init í”„ë¡œì„¸ìŠ¤(PID 1)</strong>ê°€ ì–‘ë¶€ëª¨ê°€ ë˜ì–´ ìˆ˜ê±°í•´ì¤ë‹ˆë‹¤.</li>
            </ul>
        `
    };

    // --- 3. ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥ ---
    const modalTitles = {
        'exception-basic': 'ì˜ˆì™¸(Exception)ì˜ ê¸°ë³¸ ê°œë…',
        'exception-class': 'ì˜ˆì™¸ì˜ 4ê°€ì§€ í´ë˜ìŠ¤',
        'process-concept': 'í”„ë¡œì„¸ìŠ¤(Process)ë€?',
        'context-switch': 'ë¬¸ë§¥ êµí™˜ (Context Switch)',
        'fork-sim': 'Fork() í•¨ìˆ˜ ë™ì‘ ì‹œë®¬ë ˆì´ì…˜',
        'execve-code': 'Execve & Wait ì½”ë“œ ìƒì„¸ ë¶„ì„',
        'process-graph': 'í”„ë¡œì„¸ìŠ¤ ê·¸ë˜í”„ ë¶„ì„',
        'process-state': 'í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì „ì´ë„',
        'zombie-reaping': 'ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ì™€ Reaping'
    };

    window.openModal = function(id) {
        var overlay = document.getElementById('modalOverlay');
        var title = document.getElementById('modalTitle');
        var body = document.getElementById('modalBody');
        
        title.innerText = modalTitles[id] || 'í•™ìŠµ ë‚´ìš©';
        body.innerHTML = contents[id] || '<p>ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>';
        overlay.classList.add('open');
        
        // ì‹œë®¬ë ˆì´ì…˜ ë¦¬ì…‹
        window.simStep = 0;

        // ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸°
        setTimeout(function() {
            if(id === 'process-state') drawProcessState();
        }, 50);
    };

    window.closeModal = function() {
        document.getElementById('modalOverlay').classList.remove('open');
    };

    // íƒ­ ì „í™˜ ê¸°ëŠ¥
    window.switchTab = function(tabName, btn) {
        var container = btn.closest('.tab-container');
        var btns = container.querySelectorAll('.tab-btn');
        var panes = container.querySelectorAll('.tab-pane');

        for(var i=0; i<btns.length; i++) btns[i].classList.remove('active');
        for(var i=0; i<panes.length; i++) panes[i].classList.remove('active');
        
        btn.classList.add('active');
        container.querySelector('#tab-' + tabName).classList.add('active');
    };

    // Fork ì‹œë®¬ë ˆì´ì…˜ ë¡œì§
    window.nextForkStep = function() {
        var container = document.getElementById('proc-container');
        var log = document.getElementById('sim-log');
        
        if (window.simStep === 0) {
            // 1ë‹¨ê³„: ë³µì œ
            var child = document.createElement('div');
            child.className = 'process-node child';
            child.innerHTML = 'Child (PID: 0)<div class="label">Ready</div><div class="pid-badge">Copy of Parent</div>';
            container.appendChild(child);
            log.innerHTML = "<strong>1. fork() í˜¸ì¶œ:</strong> ë¶€ëª¨ì˜ ì£¼ì†Œ ê³µê°„(ë³€ìˆ˜, ìŠ¤íƒ ë“±)ì„ ë³µì œí•˜ì—¬ ìì‹ ìƒì„±";
            window.simStep++;
        } else if (window.simStep === 1) {
            // 2ë‹¨ê³„: ë¦¬í„´ ê°’ ì°¨ì´
            var nodes = container.querySelectorAll('.process-node');
            nodes[0].innerHTML = 'Parent (Ret: 101)<div class="label">Running</div><div class="pid-badge">Return Child PID</div>';
            nodes[1].innerHTML = 'Child (Ret: 0)<div class="label">Running</div><div class="pid-badge">Return 0</div>';
            log.innerHTML = "<strong>2. ë¦¬í„´:</strong> ë¶€ëª¨ëŠ” ìì‹ PID(101) ë°˜í™˜, ìì‹ì€ 0 ë°˜í™˜";
            window.simStep++;
        } else {
            // ë¦¬ì…‹
            container.innerHTML = '<div class="process-node parent">Parent (PID: 100)<div class="label">Running</div></div>';
            log.innerText = "ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.";
            window.simStep = 0;
        }
    };

    // ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸°: í”„ë¡œì„¸ìŠ¤ ìƒíƒœë„
    function drawProcessState() {
        var c = document.getElementById('cvs_state'); if(!c) return;
        var ctx = c.getContext('2d');
        var w = c.width = c.clientWidth; var h = c.height = 240;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="bold 14px sans-serif";

        // States (Nodes)
        function drawNode(x, y, color, text, subtext) {
            ctx.fillStyle = color;
            ctx.beginPath(); ctx.arc(x, y, 45, 0, Math.PI*2); ctx.fill();
            ctx.strokeStyle = "#334155"; ctx.stroke();
            ctx.fillStyle = "#fff"; ctx.textAlign = "center"; 
            ctx.font="bold 14px sans-serif"; ctx.fillText(text, x, y-5);
            ctx.font="11px sans-serif"; ctx.fillText(subtext || "", x, y+15);
        }

        // Arrows
        ctx.strokeStyle = "#94a3b8";
        
        // Ready -> Running
        ctx.beginPath(); ctx.moveTo(95, 120); ctx.lineTo(155, 120); ctx.stroke();
        
        // Running -> Zombie
        ctx.beginPath(); ctx.moveTo(245, 120); ctx.lineTo(305, 120); ctx.stroke();
        
        // Running -> Stopped (Curve)
        ctx.beginPath(); ctx.moveTo(200, 75); ctx.quadraticCurveTo(200, 40, 250, 40); ctx.stroke();

        // Draw Nodes
        drawNode(50, 120, "#4f46e5", "Ready", "Queue");
        drawNode(200, 120, "#10b981", "Running", "CPU");
        drawNode(350, 120, "#64748b", "Zombie", "Terminated");
        
        // Labels
        ctx.fillStyle = "#334155"; ctx.font="12px sans-serif";
        ctx.fillText("Schedule", 125, 110);
        ctx.fillText("Exit", 275, 110);
        ctx.fillText("Signal", 200, 30);
    }

    // ì‹¤í–‰ ë³´ì¥
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializePage);
    } else {
        initializePage();
    }
</script>
</body>
</html>