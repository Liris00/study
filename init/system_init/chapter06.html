<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Memory Hierarchy II</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="sidebar">
    <div class="brand">âš¡ Logic Master<br><span style="font-size:0.8rem; color:#94a3b8; font-weight:400;">Exam Edition</span></div>
    <div class="menu-label">Chapter 6. Memory Hierarchy</div>
    <div class="nav-item active" onclick="showSection('sec-org', this)"><span class="nav-icon">ğŸ—„ï¸</span> 1. ìºì‹œ êµ¬ì¡°ì™€ ë™ì‘</div>
    <div class="nav-item" onclick="showSection('sec-write', this)"><span class="nav-icon">âœï¸</span> 2. ì“°ê¸° ì •ì±… & ì„±ëŠ¥</div>
    <div class="nav-item" onclick="showSection('sec-mountain', this)"><span class="nav-icon">â›°ï¸</span> 3. ë©”ëª¨ë¦¬ ë§ˆìš´í‹´</div>
    <div class="nav-item" onclick="showSection('sec-matrix', this)"><span class="nav-icon">âœ–ï¸</span> 4. í–‰ë ¬ ê³±ì…ˆ ìµœì í™”</div>
    <div class="nav-item" onclick="showSection('sec-block', this)"><span class="nav-icon">ğŸ§±</span> 5. ë¸”ë¡œí‚¹ (Blocking)</div>
</div>

<div class="main">
    <div id="sec-org" class="section-container active">
        <div class="header"><h1>1. ìºì‹œ ë©”ëª¨ë¦¬ êµ¬ì¡°</h1><p>Direct Mappedë¶€í„° Set Associativeê¹Œì§€ ìºì‹œì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('direct-mapped')">
                <span class="card-icon">ğŸ“</span>
                <div class="tag-container"><span class="tag core">ê¸°ì´ˆ</span></div>
                <h3>Direct Mapped Cache (E=1)</h3>
                <p>ê°€ì¥ ë‹¨ìˆœí•œ êµ¬ì¡°. ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ íŠ¹ì • ë¼ì¸ í•˜ë‚˜ì—ë§Œ ë§¤í•‘ë˜ëŠ” ë°©ì‹.</p>
                <div class="btn-learn">êµ¬ì¡° ë° ì˜ˆì œ (p.6)</div>
            </div>
            <div class="card" onclick="openModal('set-associative')">
                <span class="card-icon">ğŸ”</span>
                <div class="tag-container"><span class="tag exam">ì‹œí—˜ ë¹ˆì¶œ</span></div>
                <h3>Set Associative Cache</h3>
                <p>í•˜ë‚˜ì˜ Setì— ì—¬ëŸ¬ ë¼ì¸(E-way)ì„ ë‘ì–´ ì¶©ëŒì„ ì¤„ì´ëŠ” ìœ ì—°í•œ êµ¬ì¡°.</p>
                <div class="btn-learn">ë™ì‘ ì›ë¦¬ (p.11)</div>
            </div>
        </div>
    </div>

    <div id="sec-write" class="section-container">
        <div class="header"><h1>2. ì“°ê¸° ì •ì±…ê³¼ ì„±ëŠ¥ ì§€í‘œ</h1><p>ë°ì´í„° ì¼ê´€ì„± ìœ ì§€ ë°©ë²•ê³¼ ìºì‹œ ì„±ëŠ¥ ì¸¡ì •</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('write-policy')">
                <span class="card-icon">ğŸ“</span>
                <div class="tag-container"><span class="tag logic">ì •ì±…</span></div>
                <h3>Write Policy (Hit/Miss)</h3>
                <p>Write-through vs Write-back, Write-allocate vs No-write-allocate.</p>
                <div class="btn-learn">ì •ì±… ë¹„êµ (p.16)</div>
            </div>
            <div class="card" onclick="openModal('cache-perf')">
                <span class="card-icon">â±ï¸</span>
                <div class="tag-container"><span class="tag core">ê³µì‹</span></div>
                <h3>ìºì‹œ ì„±ëŠ¥ ë©”íŠ¸ë¦­</h3>
                <p>Miss Rate, Hit Time, Miss Penaltyì™€ í‰ê·  ì ‘ê·¼ ì‹œê°„(AMAT).</p>
                <div class="btn-learn">ì„±ëŠ¥ ìˆ˜ì¹˜ (p.18)</div>
            </div>
        </div>
    </div>

    <div id="sec-mountain" class="section-container">
        <div class="header"><h1>3. ë©”ëª¨ë¦¬ ë§ˆìš´í‹´ (Memory Mountain)</h1><p>ê³µê°„ ì§€ì—­ì„±ê³¼ ì‹œê°„ ì§€ì—­ì„±ì˜ ì‹œê°í™”</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('mountain-concept')">
                <span class="card-icon">ğŸ“‰</span>
                <div class="tag-container"><span class="tag exam">ê°œë…</span></div>
                <h3>Memory Mountainì´ë€?</h3>
                <p>Stride(ê³µê°„)ì™€ Working Set Size(ì‹œê°„)ì— ë”°ë¥¸ ì½ê¸° ì²˜ë¦¬ëŸ‰(Throughput) ë³€í™”.</p>
                <div class="btn-learn">ê·¸ë˜í”„ í•´ì„ (p.22)</div>
            </div>
        </div>
    </div>

    <div id="sec-matrix" class="section-container">
        <div class="header"><h1>4. í–‰ë ¬ ê³±ì…ˆê³¼ ë£¨í”„ ìˆœì„œ</h1><p>ì½”ë“œ ì‘ì„± ë°©ì‹ì´ ìºì‹œ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì¹˜ëª…ì  ì˜í–¥</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('loop-order')">
                <span class="card-icon">ğŸ”„</span>
                <div class="tag-container"><span class="tag logic">ì½”ë”©</span></div>
                <h3>Loop Reordering (ijk)</h3>
                <p>ijk, kij, jki ë“± ë£¨í”„ ìˆœì„œ ë³€ê²½ì— ë”°ë¥¸ Miss Rateì˜ ë“œë¼ë§ˆí‹±í•œ ì°¨ì´.</p>
                <div class="btn-learn">ìˆœì„œë³„ ë¶„ì„ (p.31)</div>
            </div>
        </div>
    </div>

    <div id="sec-block" class="section-container">
        <div class="header"><h1>5. ë¸”ë¡œí‚¹ (Blocking)</h1><p>ì‹œê°„ ì§€ì—­ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê³ ê¸‰ ìµœì í™” ê¸°ë²•</p></div>
        <div class="grid">
            <div class="card" onclick="openModal('blocking-tech')">
                <span class="card-icon">ğŸ§±</span>
                <div class="tag-container"><span class="tag exam">â˜…ì‹¬í™”</span></div>
                <h3>Blocking ê¸°ë²•</h3>
                <p>í° í–‰ë ¬ì„ ìºì‹œì— ë“¤ì–´ê°€ëŠ” ì‘ì€ ë¸”ë¡(B x B)ìœ¼ë¡œ ìª¼ê°œì„œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•.</p>
                <div class="btn-learn">ì„±ëŠ¥ ë¶„ì„ (p.43)</div>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-header">
            <div class="modal-title" id="modalTitle"></div>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
    </div>
</div>

<script src="common.js"></script>
<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ì„¹ì…˜ì´ í‘œì‹œë˜ë„ë¡ ë³´ì¥
    document.addEventListener('DOMContentLoaded', function() {
        const firstSection = document.getElementById('sec-org');
        if (firstSection) {
            firstSection.classList.add('active');
        }
        const firstNav = document.querySelector('.nav-item');
        if (firstNav) {
            firstNav.classList.add('active');
        }
    });

    const modalTitles = {
        'direct-mapped': 'Direct Mapped Cache ë™ì‘',
        'set-associative': 'Set Associative Cache ë™ì‘',
        'write-policy': 'ìºì‹œ ì“°ê¸° ì •ì±… (Write Policy)',
        'cache-perf': 'ìºì‹œ ì„±ëŠ¥ ë¶„ì„ (AMAT)',
        'mountain-concept': 'The Memory Mountain',
        'loop-order': 'í–‰ë ¬ ê³±ì…ˆ ë£¨í”„ ìµœì í™”',
        'blocking-tech': 'ë¸”ë¡œí‚¹ (Blocking) ê¸°ë²•'
    };

    // --- ë°ì´í„° (6ì¥ ë‚´ìš©) ---
    const contents = {
        // [Cache Organization]
        'direct-mapped': `
            <h3>Direct Mapped Cache (E=1)</h3>
            <p>ê° ë©”ëª¨ë¦¬ ë¸”ë¡ì´ ìºì‹œì˜ <strong>ì •í•´ì§„ ë”± í•œ ê³³</strong>(Set)ì—ë§Œ ì €ì¥ë  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.</p>
            <ul>
                <li><strong>ì£¼ì†Œ ë§¤í•‘:</strong> <code>Set Index = Memory Address % Number of Sets</code></li>
                <li><strong>êµ¬ì¡°:</strong> ì£¼ì†Œë¥¼ <strong>Tag | Set Index | Block Offset</strong>ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤.</li>
                <li><strong>ë™ì‘:</strong>
                    <ol>
                        <li>Indexë¡œ Setì„ ì°¾ìŠµë‹ˆë‹¤.</li>
                        <li>ì €ì¥ëœ Tagì™€ ì£¼ì†Œì˜ Tagê°€ ì¼ì¹˜í•˜ëŠ”ì§€, Valid ë¹„íŠ¸ê°€ 1ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.</li>
                        <li>ì¼ì¹˜í•˜ë©´ Hit, ì•„ë‹ˆë©´ Miss (ê¸°ì¡´ ë°ì´í„° êµì²´).</li>
                    </ol>
                </li>
            </ul>
            <div class="exam-point">
                <h4>ğŸš© ë‹¨ì : ì¶©ëŒ ë¯¸ìŠ¤ (Conflict Miss)</h4>
                <p>ì„œë¡œ ë‹¤ë¥¸ ì£¼ì†Œì§€ë§Œ ê°™ì€ Indexë¥¼ ê°€ì§€ëŠ” ë°ì´í„°ë“¤ì„ ë²ˆê°ˆì•„ ì ‘ê·¼í•˜ë©´, ìºì‹œê°€ ê³„ì† êµì²´ë˜ì–´ ì„±ëŠ¥ì´ ì €í•˜ë©ë‹ˆë‹¤ (Thrashing).</p>
            </div>
        `,
        'set-associative': `
            <h3>E-way Set Associative Cache</h3>
            <p>Direct Mappedì˜ ìœ ì—°ì„± ë¶€ì¡±ì„ í•´ê²°í•˜ê¸° ìœ„í•´, í•˜ë‚˜ì˜ Setì— <strong>Eê°œì˜ ë¼ì¸(Line)</strong>ì„ ë‘¡ë‹ˆë‹¤.</p>
            <ul>
                <li><strong>íŠ¹ì§•:</strong> ë©”ëª¨ë¦¬ ë¸”ë¡ì€ íŠ¹ì • Setì˜ <strong>ì–´ëŠ ë¼ì¸ì—ë„</strong> ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ê²€ìƒ‰:</strong> Set ë‚´ë¶€ì˜ ëª¨ë“  ë¼ì¸ì˜ Tagë¥¼ <strong>ë™ì‹œì— ë¹„êµ</strong>í•©ë‹ˆë‹¤.</li>
                <li><strong>êµì²´ ì •ì±… (Replacement Policy):</strong> Setì´ ê½‰ ì°¼ì„ ë•Œ ëˆ„êµ¬ë¥¼ ë‚´ì«“ì„ì§€ ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: LRU - Least Recently Used)</li>
            </ul>
            <canvas id="cvs_assoc"></canvas>
            <p><em>* ìœ„ ê·¸ë¦¼ì€ 2-Way Set Associative êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</em></p>
        `,

        // [Write & Performance]
        'write-policy': `
            <h3>ìºì‹œ ì“°ê¸° ì •ì±… (Write Policy)</h3>
            <p>ë°ì´í„°ë¥¼ ì“¸ ë•Œ ìºì‹œì™€ ë©”ì¸ ë©”ëª¨ë¦¬ì˜ ì¼ê´€ì„±ì„ ì–´ë–»ê²Œ ìœ ì§€í•  ê²ƒì¸ê°€?</p>
            
            <h4>1. Write Hit (ìºì‹œì— ë°ì´í„°ê°€ ìˆì„ ë•Œ)</h4>
            <ul>
                <li><strong>Write-Through:</strong> ìºì‹œì™€ ë©”ëª¨ë¦¬ì— <strong>ë™ì‹œì—</strong> ì”ë‹ˆë‹¤. (ì•ˆì „í•˜ì§€ë§Œ ëŠë¦¼)</li>
                <li><strong>Write-Back:</strong> <strong>ìºì‹œì—ë§Œ</strong> ì“°ê³ , ë‚˜ì¤‘ì— ê·¸ ë°ì´í„°ê°€ ì«“ê²¨ë‚  ë•Œ(Eviction) ë©”ëª¨ë¦¬ì— ì”ë‹ˆë‹¤. (ë¹ ë¥´ì§€ë§Œ Dirty Bit ê´€ë¦¬ í•„ìš”)</li>
            </ul>

            <h4>2. Write Miss (ìºì‹œì— ë°ì´í„°ê°€ ì—†ì„ ë•Œ)</h4>
            <ul>
                <li><strong>Write-Allocate:</strong> ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ ìºì‹œë¡œ ê°€ì ¸ì˜¨ ë’¤ ì”ë‹ˆë‹¤. (Write-Backê³¼ ì§ê¿)</li>
                <li><strong>No-Write-Allocate:</strong> ìºì‹œë¥¼ ê±´ë„ˆë›°ê³  ë©”ëª¨ë¦¬ì— ì§ì ‘ ì”ë‹ˆë‹¤. (Write-Throughì™€ ì§ê¿)</li>
            </ul>
        `,
        'cache-perf': `
            <h3>ìºì‹œ ì„±ëŠ¥ ì§€í‘œ</h3>
            <div class="math-block">
                Average Access Time = Hit Time + (Miss Rate Ã— Miss Penalty)
            </div>
            <ul>
                <li><strong>Hit Time:</strong> ìºì‹œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‹œê°„ (ë§¤ìš° ì§§ìŒ, L1ì˜ ê²½ìš° 1~2 cycle).</li>
                <li><strong>Miss Rate:</strong> ìºì‹œì— ë°ì´í„°ê°€ ì—†ì„ í™•ë¥ . (L1ì€ 3~10% ì •ë„).</li>
                <li><strong>Miss Penalty:</strong> ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¹„ìš© (ë§¤ìš° í¼, 50~200 cycles).</li>
            </ul>
            <div class="exam-point">
                <h4>ğŸš© í•µì‹¬: Miss Rateì´ ê¹¡íŒ¨ë‹¤</h4>
                <p>Miss Penaltyê°€ ì›Œë‚™ í¬ê¸° ë•Œë¬¸ì—, Hit Rateê°€ 97%ì—ì„œ 99%ë¡œ 2%ë§Œ ì˜¬ë¼ë„ í‰ê·  ì ‘ê·¼ ì†ë„ëŠ” <strong>2ë°°</strong> ë¹¨ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        `,

        // [Memory Mountain]
        'mountain-concept': `
            <h3>The Memory Mountain</h3>
            <p>í”„ë¡œê·¸ë¨ì˜ <strong>ê³µê°„ ì§€ì—­ì„±(Spatial Locality)</strong>ê³¼ <strong>ì‹œê°„ ì§€ì—­ì„±(Temporal Locality)</strong>ì— ë”°ë¥¸ ë©”ëª¨ë¦¬ ëŒ€ì—­í­(Read Throughput)ì„ 3ì°¨ì› ì‚°ë§¥ì²˜ëŸ¼ ì‹œê°í™”í•œ ê·¸ë˜í”„ì…ë‹ˆë‹¤.</p>
            
            <ul>
                <li><strong>Ridges (ëŠ¥ì„ ) - ì‹œê°„ ì§€ì—­ì„±:</strong> Working Set Size(ë°ì´í„° í¬ê¸°)ê°€ ì‘ì•„ì„œ L1, L2 ìºì‹œ ì•ˆì— ë‹¤ ë“¤ì–´ê°ˆìˆ˜ë¡ ì„±ëŠ¥ì´ ë†’ìŠµë‹ˆë‹¤. (ê·¸ë˜í”„ì˜ í‰í‰í•œ ê³ ì›ë“¤)</li>
                <li><strong>Slopes (ë¹„íƒˆ) - ê³µê°„ ì§€ì—­ì„±:</strong> Stride(ì ‘ê·¼ ê°„ê²©)ê°€ ì‘ì„ìˆ˜ë¡(ì˜ˆ: stride-1) ìºì‹œ ë¸”ë¡ í™œìš©ë„ê°€ ë†’ì•„ ì„±ëŠ¥ì´ ì¢‹ìŠµë‹ˆë‹¤. Strideê°€ ì»¤ì§€ë©´ ë¹„íƒˆê¸¸ì„ ë”°ë¼ ì„±ëŠ¥ì´ ê³¤ë‘ë°•ì§ˆì¹©ë‹ˆë‹¤.</li>
            </ul>
        `,

        // [Matrix Multiplication]
        'loop-order': `
            <h3>í–‰ë ¬ ê³±ì…ˆ ë£¨í”„ ìˆœì„œ (Loop Reordering)</h3>
            <p><code>for(i.. for(j.. for(k..)))</code> 3ì¤‘ ë£¨í”„ì˜ ìˆœì„œë¥¼ ë°”ê¾¸ë©´ ìºì‹œ ì ì¤‘ë¥ ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p>

            <table>
                <tr>
                    <th>ìˆœì„œ</th>
                    <th>ì ‘ê·¼ íŒ¨í„´</th>
                    <th>Misses / Iteration</th>
                    <th>ì„±ëŠ¥</th>
                </tr>
                <tr>
                    <td><strong>ijk, jik</strong></td>
                    <td>2 loads, 0 stores<br>(Row-wise, Column-wise í˜¼í•©)</td>
                    <td>1.25</td>
                    <td>ì¤‘ê°„</td>
                </tr>
                <tr>
                    <td><strong>kij, ikj</strong></td>
                    <td>2 loads, 1 store<br><strong>(ëª¨ë‘ Stride-1 ì ‘ê·¼)</strong></td>
                    <td>0.5</td>
                    <td><strong>ìµœê³  (Best)</strong></td>
                </tr>
                <tr>
                    <td><strong>jki, kji</strong></td>
                    <td>2 loads, 1 store<br>(ì‹¬ê°í•œ Column-wise ì í”„)</td>
                    <td>2.0</td>
                    <td>ìµœì•… (Worst)</td>
                </tr>
            </table>
            <p><strong>ê²°ë¡ :</strong> ë‚´ë¶€ ë£¨í”„ì—ì„œ <code>a[i][k]</code>, <code>b[k][j]</code>ì™€ ê°™ì´ ì¸ë±ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ë³€í•˜ë„ë¡(Spatial Locality) ì½”ë“œë¥¼ ì§œì•¼ í•©ë‹ˆë‹¤.</p>
        `,

        // [Blocking]
        'blocking-tech': `
            <h3>ë¸”ë¡œí‚¹ (Blocking) ê¸°ë²•</h3>
            <p>í–‰ë ¬ì´ ì»¤ì„œ ìºì‹œì— ë‹¤ ì•ˆ ë“¤ì–´ê°ˆ ë•Œ, í–‰ë ¬ì„ ì‘ì€ <strong>ë¸”ë¡(Sub-matrix)</strong> ë‹¨ìœ„ë¡œ ìª¼ê°œì„œ ì²˜ë¦¬í•˜ëŠ” ê¸°ë²•ì…ë‹ˆë‹¤.</p>

            <div class="tech-note">
                <h4>ì™œ ì“°ëŠ”ê°€? (Temporal Locality)</h4>
                <p>ì¼ë°˜ í–‰ë ¬ ê³±ì…ˆì€ í•œ ì¤„ì„ ë‹¤ ì½ê³  ë‹¤ìŒ ì¤„ë¡œ ê°ˆ ë•Œì¯¤ì´ë©´, ì•ë¶€ë¶„ ë°ì´í„°ê°€ ìºì‹œì—ì„œ ì´ë¯¸ ì«“ê²¨ë‚˜ ìˆìŠµë‹ˆë‹¤. ë¸”ë¡œí‚¹ì„ ì“°ë©´ ì‘ì€ ë¸”ë¡ ë°ì´í„°ë¥¼ ìºì‹œì— ê½‰ ì¡ê³ (Load) ëª¨ë“  ì—°ì‚°ì„ ëë‚¸ ë’¤(Reuse) êµì²´í•©ë‹ˆë‹¤.</p>
            </div>

            <canvas id="cvs_blocking"></canvas>

            <ul>
                <li><strong>No Blocking:</strong> Miss Rate = 9/8 * nÂ³</li>
                <li><strong>Blocking:</strong> Miss Rate = 1/(4B) * nÂ³  (BëŠ” ë¸”ë¡ í¬ê¸°)</li>
            </ul>
            <p>ë¸”ë¡ í¬ê¸° Bë¥¼ ìºì‹œ ì‚¬ì´ì¦ˆì— ë§ì¶° í‚¤ìš¸ìˆ˜ë¡ ì„±ëŠ¥ì´ ë¹„ì•½ì ìœ¼ë¡œ í–¥ìƒë©ë‹ˆë‹¤.</p>
        `
    };

    // --- ê·¸ë¦¬ê¸° í•¨ìˆ˜ ---
    function runDrawing(id) {
        if (id === 'set-associative') drawAssociative();
        else if (id === 'blocking-tech') drawBlocking();
    }

    function drawAssociative() {
        const c = document.getElementById('cvs_assoc'); if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width = c.clientWidth || 600; const h = c.height = 180;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="14px sans-serif";

        // Set Box
        ctx.strokeRect(50, 40, 500, 100);
        ctx.fillStyle = "#1e293b"; ctx.fillText("Set i", 20, 95);

        // Line 0
        ctx.fillStyle = "#eff6ff"; ctx.fillRect(60, 50, 200, 80);
        ctx.strokeRect(60, 50, 200, 80);
        ctx.fillStyle = "#1e293b"; ctx.fillText("Way 0 (Line)", 110, 95);
        ctx.strokeRect(70, 60, 40, 60); ctx.fillText("Tag", 75, 95);

        // Line 1
        ctx.fillStyle = "#eff6ff"; ctx.fillRect(340, 50, 200, 80);
        ctx.strokeRect(340, 50, 200, 80);
        ctx.fillStyle = "#1e293b"; ctx.fillText("Way 1 (Line)", 390, 95);
        ctx.strokeRect(350, 60, 40, 60); ctx.fillText("Tag", 355, 95);

        // Input Tag
        ctx.fillText("Search Tag", 260, 20);
        ctx.beginPath(); ctx.moveTo(300, 25); 
        ctx.lineTo(90, 25); ctx.lineTo(90, 60); // to Way 0
        ctx.moveTo(300, 25);
        ctx.lineTo(370, 25); ctx.lineTo(370, 60); // to Way 1
        ctx.stroke();

        ctx.fillStyle = "#f43f5e"; ctx.fillText("Parallel Compare", 250, 160);
    }

    function drawBlocking() {
        const c = document.getElementById('cvs_blocking'); if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width = c.clientWidth || 600; const h = c.height = 180;
        ctx.clearRect(0,0,w,h); ctx.lineWidth=2; ctx.font="12px sans-serif";

        // Matrix A
        ctx.strokeRect(50, 30, 100, 100); ctx.fillText("Matrix A", 70, 20);
        ctx.fillStyle = "#cbd5e1"; ctx.fillRect(50, 30, 100, 100);
        // Block in A
        ctx.fillStyle = "#f43f5e"; ctx.fillRect(50, 30, 30, 30); ctx.strokeRect(50, 30, 30, 30);
        
        ctx.fillStyle = "#1e293b"; ctx.fillText("*", 170, 80);

        // Matrix B
        ctx.strokeRect(200, 30, 100, 100); ctx.fillText("Matrix B", 220, 20);
        ctx.fillStyle = "#cbd5e1"; ctx.fillRect(200, 30, 100, 100);
        // Block in B
        ctx.fillStyle = "#4f46e5"; ctx.fillRect(200, 30, 30, 30); ctx.strokeRect(200, 30, 30, 30);

        // Arrow text
        ctx.fillStyle = "#334155";
        ctx.fillText("Compute B x B block", 100, 150);
        ctx.fillText("Fit in Cache!", 115, 165);

        // Connection lines
        ctx.beginPath(); ctx.moveTo(65, 60); ctx.lineTo(65, 130); ctx.lineTo(150, 130); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(215, 60); ctx.lineTo(215, 130); ctx.lineTo(150, 130); ctx.stroke();
    }
</script>
</body>
</html>